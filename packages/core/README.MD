# ðŸš€ DAuth/core

By integrating the DAuth SDK into your platform, you can offer your users a decentralized and verifiable social authentication experience. This includes One-Time Password (OTP) methods via Email and SMS, and OAuth protocols through platforms like Google and Github.

## ðŸŽ‰ Features

- Integration with DAuth Network
- Build encrypted channel for each data transfer, make sure all the user info is invisible to any DAuth Node
- Get and verify OTP codes through the private channel
- Get the idtoken through OAuth flow and generate ZK proof based on the token;
- Easy to use and implement

## ðŸ“¦ Installation

The easiest way to install DAuth is through npm:

```shell
yarn add @dauth/core
```

## ðŸš€ Getting Started

Once the package installed, you can import it into your project and start using it:

```javascript
const DAuth = require('@dauth/core');
const dauth = new DAuth('dauth node-url');
```

Use the authOpt method to dispatch an OTP code to the user. This method requires three parameters: 'account', which should be the user's email address or phone number; 'account type', which can either be 'email' or 'sms'; and 'request_id', which could be a string containing the unique transaction/bundle information.

```javascript
    // account, account_type, request_id
    await dauth.service.authOpt({
        account: account,
        account_type: 'email',
        request_id: 'test'
      })
```
To verify an OTP code, you can use the `authOptConfirm` method:

```javascript
    // code, request_id
    const result = await dauth.service.authOptConfirm({
        code,
        request_id: 'test'
      })
    /* example return 
    {
    "auth": {
        "account": "8f20fae59e796d5b5249......aea2c7fc6200dc5fbd5a",
        "auth_type": "email",
        "request_id": "test"
    },
    "signature": "49fc6da1f3664fe66ef5a4311584d0b5a6.....cb44a3ba84729dd2c08ac05edd01dc41501d5d1a96631c"
    */
}
```

Upon successful One-Time Password (OTP) verification within the DAuth Network, a signature is generated by the DAuth Network. This signature acts as a DAuth proof, enabling anyone to verify the user's identity. This proof can also be verified on-chain. As a result, contract wallets have the ability to discard all centralized verifications and directly trigger user transactions in a decentralized way.

### Using OAuth in DAuth

#### Google OAuth
1. Get authorization code from google
 we recommand you to use [@react-oauth/google](https://www.npmjs.com/package/@react-oauth/google) to get the authorization code. 
2. Once you get the authorization code, you can use `dauth.service.authOAuth` to get the idtoken and signature.
```javascript
    // code, request_id, auth_type
    const result = await dauth.service.authOauth({
        token: authorization_code,
        request_id: 'test',
        auth_type: 'google'
      })
    /* example return 
        {
    "auth": {
        "account": "f69fd6bd0e98a7c2792e1909cedf21455f9629940c5d8fcaec8aa3e7fd5de767",
        "auth_type": "google",
        "request_id": "test"
    },
    "signature": "a5186118ad83eb466e60b37dcc97e159272335********052c3253aa60ac2c63fd1c"
    }
}
```


