## SDK V2 version
In v2 api, when using sign_mode "proof", user need to provide 2 parameters: sign_msg and id_key_salt. 
- `id_key_salt` needs to be a int32 above 0. When server receives sign_mode "proof" with id_key_salt, it first derive a new private key from master key using user_account hash and id_key_salt, use the new private key to sign "sign_msg".
- `sign_msg` can be any random string or a hex encoded kecc256 hash. When sign_msg is a random string, server uses kecc256 hash to generate a 256 bit hash. Then use the private key generated to sign it.
After signing, server returns signature, and auth data including: 
`id_pub_key`  can be used to verify the signature and 
`acc_and_type_hash` can be used as user id.

## Example
### Init a dauth instance 
```javascript

import DAuth from "@dauth/core";
const dauthV2 = new DAuth.default({
    baseURL: process.env.NEXT_PUBLIC_V2_DAUTH_BASEURL!,
    clientID: 'demo',
    version: 2 // Spificy version 2 to use v2 api
})

```
### Leveraging OPT Authentication with DAuth

1. Use the `sendOtp` method to deliver an OTP code to the user. This method requires three parameters:

- `account`, which refers to the user's Google account, email address, or phone number. It is hexlike string without "0x".
- `id_type`, which can be `mailto`, `tel`;
- `request_id` is client-provided, and could be a string containing a unique transaction/bundle/userOp ID. It is string or hexlike string without "0x".

```typescript
// account, account_type, request_id
await dauth.service.sendOtp({
  account: account,
  id_type: "mailto",
  request_id: "request_id", // request_id: 'The id related to the TX or userOp'
});
```

2.  The `authOtpConfirm` method can be used to verify an OTP code and obtain the DAuth proof.


```typescript
 enum ESignMode {
   JWT = "jwt",
   PROOF = "proof",
   JWT_FIREBASE = "jwtdb",
   BOTH = "both"
}

// code,
// request_id
// mode: ESignMode
// id_type: "mailto" | "tel"
// id_key_salt: number,
//  sign_msg: string,
const result = await dauth.service.authOtpConfirm({
   code: emailOtp,
   request_id: requestId,
   mode: ESignMode.JWT,
   id_type: 'mailto',
   id_key_salt: 123456, // Added in v2
   sign_msg: "testsignmessage", // Added in v2
   withPlainAccount: false 
})


``` json
{
  "mode": "proof",
  "data": {
    "auth": {
      "acc_and_type_hash": "c5056aae3e4b528500f5e19b0ef9a4e2bc301e0ebc45359377ec916766cdb226",
      "id_pub_key": "02c6bd5db842f9b94d36689f8e69a11e49449f85d220a5b7bae5ec0f8ff2103d18"
    },
    "signature": "dea16579f68ba36872bd25ac73efe02957f94bae3b5d113c5c8b4354b666162d7fb722da8a2723761e27342602382d2f0291fc2e0cc26e94d7690389297aa2c61b",
    "ustore": {
      "user_key_plain": "c9dc1a8eb2f7e4c7aeda45cc1800a32d4fc176e93e4786a8d10990a83dd40da4",
      "user_key": "4a309bb66d42416d307a6242d8efcc052a9f1d9ff364db8f242896797e2c25c914ab69a883247afb1b954767bdfff44d",
      "user_key_signature": "0055a332430818a8cc2f171fede55e8ef0c9e551e40f9f54bda6397f52270f9975d2fdbccbe044ca44e528c981072d582c02ad220462e6ad03ab17154930f9781c"
    }
  }
}

```
